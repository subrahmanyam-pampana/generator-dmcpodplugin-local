ID: <%= name %>
_schema-version: '3.2'
version: 1.0.0

modules:
 - name: <%= name %>
   type: html5
   path: <%= name %>
   parameters:
      disk-quota: 256M
      memory: 256M
   properties:
    httpHeaders:
       - X-Frame-Options: deny
    CORS: '[
            {
               "uriPattern": "^/<%= name %>/(.*)$",
               "allowedOrigin": [
                  {
                  "host": "<%= host %>",
                  "protocol": "https"
                  }
               ],
               "allowedMethods": [
                  "GET",
                  "OPTIONS"
               ],
               "allowedHeaders": [
                  "Origin",
                  "Accept",
                  "X-Requested-With",
                  "Content-Type",
                  "Access-Control-Request-Method",
                  "Access-Control-Request-Headers",
                  "Authorization",
                  "X-Sap-Cid",
                  "X-Csrf-Token",
                  "x-dme-industry-type",
                  "x-dme-plant",
                  "x-features"
               ],
               "exposeHeaders": [
                  "Accept",
                  "Authorization",
                  "X-Requested-With",
                  "X-Sap-Cid",
                  "Access-Control-Allow-Origin",
                  "Access-Control-Allow-Credentials",
                  "X-Csrf-Token",
                  "Content-Type",
                  "x-dme-industry-type",
                  "x-dme-plant",
                  "x-features"
               ]
            },
            {
               "uriPattern": "^/api/(.*)$",
               "allowedOrigin": [
                  {
                  "host": "<%= host %>",
                  "protocol": "https"
                  }
               ],
               "allowedMethods": [
                  "GET",
                  "OPTIONS",
                  "POST",
                  "PUT",
                  "DELETE",
                  "PATCH"
               ],
               "allowedHeaders": [
                  "Origin",
                  "Accept",
                  "X-Requested-With",
                  "Content-Type",
                  "Access-Control-Request-Method",
                  "Access-Control-Request-Headers",
                  "Authorization",
                  "X-Sap-Cid",
                  "X-Csrf-Token",
                  "x-dme-industry-type",
                  "x-dme-plant",
                  "x-features"
               ],
               "exposeHeaders": [
                  "Accept",
                  "Authorization",
                  "X-Requested-With",
                  "X-Sap-Cid",
                  "Access-Control-Allow-Origin",
                  "Access-Control-Allow-Credentials",
                  "X-Csrf-Token",
                  "Content-Type",
                  "x-dme-industry-type",
                  "x-dme-plant",
                  "x-features"
               ]
            }
            ]'
   requires:
    - name: destination-dm-custom-plugin

resources:
 - name: destination-dm-custom-plugin
   parameters:
      service-plan: lite  
      service: destination 
   type: org.cloudfoundry.managed-service

